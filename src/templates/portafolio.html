<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portafolio</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/style.css' %}">
    <link rel="stylesheet" href="{% static 'styles/portafolio.css' %}">
</head>
<body>

    {% include 'header.html' %}

    <div class="container">
        <div class="color-cuatro pt-3">
            <h3 class="pb-1 f-xb color-basico-fw" style="border-bottom: 2px solid #ccc; margin-left: 50px; margin-right: 50px; display: flex; justify-content: space-between;">
                <span>Portafolio</span>
                <span>{{ user.nombres }}</span>
            </h3>
        </div>
            

        {% if mensaje %}
    <p>{{ mensaje }}</p>
    {% else %}
    <table class="tabla-portafolio">
        <thead>
            <tr>
                <th>Acción</th>
                <th>Número de Acciones</th>
                <th>Fecha de Compra</th>
                <th>Costo de Compra por Acción</th>
                <th>Precio Actual</th>
                <th>Costo Total</th>
                <th>Costo Mercado Total</th>
                <th>Ganancia/Perdida</th>
                <th>Porcentaje de Ganancia/Perdida</th>
            </tr>
        </thead>
        <tbody>
            {% for accion in acciones_portafolio %}
            <tr>
                <td>{{ accion.nombre }}</td>
                <td>{{ accion.cantidad }}</td>
                <td>{{ accion.fecha_compra }}</td>
                <td>{{ accion.precio_compra|floatformat:3 }}</td>
                <td>{{ accion.precio_actual|floatformat:3 }}</td>                
                <td>{{ accion.costo_total|floatformat:2 }}</td>
                <td>{{ accion.costo_mercado_total|floatformat:2 }}</td>
                <td>
                    {% if accion.obtener_rendimiento_dolares >= 0 %}
                        <span style="color: green;">+{{ accion.obtener_rendimiento_dolares|floatformat:2 }}</span>
                    {% else %}
                        <span style="color: red;">{{ accion.obtener_rendimiento_dolares|floatformat:2 }}</span>
                    {% endif %}
                </td>
            
                <td>
                    {% if accion.obtener_rendimiento_porcentaje >= 0 %}
                        <span style="color: green;">+{{ accion.obtener_rendimiento_porcentaje|floatformat:2 }}%</span>
                    {% else %}
                        <span style="color: red;">{{ accion.obtener_rendimiento_porcentaje|floatformat:2 }}%</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="10">No tienes acciones en tu portafolio.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>


    {% endif %}
    
    </div>

    {% include 'mensajes.html' %}
    <script src="{% static 'js/mensajes.js' %}"></script>
</body>
</html>
